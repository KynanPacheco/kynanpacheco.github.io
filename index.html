<!DOCTYPE html>
<head>
	<link href="/Files/template.css" type="text/css" rel="stylesheet">
	<title>Bigby's Hand Encounter Builder</title>
</head>

<body>
	<div class="banner">
		<img src="/Images/fist.png" alt="Bigby's Hand" class="fist">
	</div>
	
	<div class="body">
		<a href="/Pages/add_monster/add_monster.html"><p>Add a Monster</p></a>
		<a href="/Pages/encounter/encounter.html"><p>Begin Encounter</p></a>
		<p>The encounters total CR is:</p>
		<p id="cr">NA</p><br>
		
		<h3>Monsters</h3>
		<table id="monsterList">
			<tr>
				<th>Name</th>
				<th>CR</th>
			<tr>
		</table>
		
		<h3>Player Characters</h3>
		<table>
			<tr>
				<th>Name</th>
				<th>Level<th>
			</tr>
		</table>
	</div>
	
	<script>
		var monsterList = document.getElementById("monsterList");
	
		var xhttp = new XMLHttpRequest();
		xhttp.open("GET", "/Files/monstermanual.json", false);
		xhttp.send(null);
		var monsterManual = JSON.parse(xhttp.responseText);
		
		var cookie = document.cookie;
		var monsterJSON = cookie.slice(9);
		var myMonsters = JSON.parse(monsterJSON);
		var monsterNumber = myMonsters.length;
		console.log(myMonsters);
		
		function listMonsters(monsterCount) {
			for(var i = 0; i < monsterCount; i++){
				var row = monsterList.insertRow(-1);
				var name = row.insertCell(-1);
				var type = row.insertCell(-1);
				var cr = row.insertCell(-1);
			
				name.innerHTML = monsterManual[myMonster[i]].name;
				type.innerHTML = monsterManual[myMonster[i]].type;
				cr.innerHTML = monsterManual[myMonster[i]].challenge_rating;
			}
		}
		
		listMonsters(monsterNumber);
	</script>
</body>
